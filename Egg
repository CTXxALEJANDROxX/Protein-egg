local ReplicatedStorage = game:GetService("ReplicatedStorage")
local Players = game:GetService("Players")

local LocalPlayer = Players.LocalPlayer
local PROTEIN_EGG_NAME = "Protein Egg"
local PROTEIN_EGG_INTERVAL = 30 * 60

local proteinEggEnabled = false
local lastProteinEggTime = 0

local function usarProteinEgg()
    if not proteinEggEnabled then return end

    local sources = {
        LocalPlayer:FindFirstChild("Backpack"),
        LocalPlayer:FindFirstChild("consumablesFolder")
    }

    for _, folder in pairs(sources) do
        if folder then
            for _, item in pairs(folder:GetChildren()) do
                if item.Name == PROTEIN_EGG_NAME then
                    if ReplicatedStorage:FindFirstChild("rEvents") and ReplicatedStorage.rEvents:FindFirstChild("eatEvent") then
                        ReplicatedStorage.rEvents.eatEvent:FireServer("eat", item)
                        print("[PROTEIN EGG] Huevo consumido.")
                        lastProteinEggTime = tick()
                        return
                    else
                        warn("[PROTEIN EGG] No se encontró eatEvent.")
                    end
                end
            end
        end
    end

    warn("[PROTEIN EGG] No se encontró el huevo.")
end

task.spawn(function()
    while true do
        if proteinEggEnabled and (tick() - lastProteinEggTime >= PROTEIN_EGG_INTERVAL) then
            usarProteinEgg()
        end
        task.wait(5)
    end
end)
